<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ | YP&#39;s Dev Memo</title>
<meta name="keywords" content="CSS, Animation">
<meta name="description" content="é…åˆ react-spring, use-gesture æ“ä½œ CSS ä¾†åšç¿»é å‹•ç•«">
<meta name="author" content="Yu-Pang">
<link rel="canonical" href="https://canonical.url/to/page">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c5ad9f205171fab820252a87a0292578dcaa85c950f40ab21addf6cb9611c26a.css" integrity="" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://AlliesChen.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://AlliesChen.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://AlliesChen.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://AlliesChen.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://AlliesChen.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript> <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css"
  integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X"
  crossorigin="anonymous"
/>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.js"
  integrity="sha384-Qsn9KnoKISj6dI8g7p1HBlNpVx0I8p1SvlwOldgi3IorMle61nQy4zEahWYtljaz"
  crossorigin="anonymous"
></script>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/auto-render.min.js"
  integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
  crossorigin="anonymous"
></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      
      
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true },
      ],
      
      throwOnError: false,
    });
  });
</script>
 
<meta property="og:title" content="é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ" />
<meta property="og:description" content="é…åˆ react-spring, use-gesture æ“ä½œ CSS ä¾†åšç¿»é å‹•ç•«" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://AlliesChen.github.io/posts/page-flip_animation_with_css/" />
<meta property="og:image" content="https://AlliesChen.github.io/images/a_child_waves_hand_in_spring.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-19T23:29:44&#43;08:00" />
<meta property="article:modified_time" content="2023-09-19T23:29:44&#43;08:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://AlliesChen.github.io/images/a_child_waves_hand_in_spring.jpg" />
<meta name="twitter:title" content="é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ"/>
<meta name="twitter:description" content="é…åˆ react-spring, use-gesture æ“ä½œ CSS ä¾†åšç¿»é å‹•ç•«"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://AlliesChen.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ",
      "item": "https://AlliesChen.github.io/posts/page-flip_animation_with_css/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ",
  "name": "é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ",
  "description": "é…åˆ react-spring, use-gesture æ“ä½œ CSS ä¾†åšç¿»é å‹•ç•«",
  "keywords": [
    "CSS", "Animation"
  ],
  "articleBody": "è¿‘æœŸæƒ³é€éã€Œç¿»é ã€é€™å€‹äº’å‹•æ–¹å¼ä¾†åšä¸€å€‹ web å°éŠæˆ²ï¼Œéç¨‹ä¸­ç™¼ç¾æ„å¤–åœ°ä¸å¥½å¯¦ç¾ã€‚\né€™ç¯‡æ–‡ç« éœ€è¦è®€è€…å° React é€™å€‹å‰ç«¯æ¡†æ¶åŠ CSS çš„ transition å±¬æ€§çš„æ‡‰ç”¨æœ‰åŸºæœ¬çš„äº†è§£ï¼ŒæˆæœåŠåŸå§‹ç¢¼æ˜¯å»ºç«‹æ–¼é€™å…©å€‹æŠ€è¡“ä¹‹ä¸Šçš„ï¼Œå…§æ–‡æœƒå¤§ç•¥åœ°å°å¯¦è¸çš„æ–¹å¼èªªæ˜ï¼Œä½†ä¸æœƒè©³ç´°åœ°æåŠæ‰€ä½¿ç”¨çš„æ¡†æ¶åŠå‡½å¼åº«ç¢ºåˆ‡ API çš„åŠŸèƒ½åŠç”¨æ³•ã€‚\nTL;DR æˆæœ: https://codesandbox.io/s/page-flippable-book-5h5ktm?file=/src/Page.tsx\né€é translateZ åšå‡ºæ›¸é çš„æ­£åé¢ 2023/9/22 åŸºæ–¼å‰ç«¯ç¤¾ç¾¤ç¶²å‹çš„å»ºè­°ï¼Œæˆ‘æŠŠåŸå…ˆç”¨ opacity è®Šæ›åšå‡ºçš„é é¢æ­£åé¢ï¼Œæ›æˆéœæ…‹ã€å–®ç´”åŠ åœ¨ CSS classâ€“ back ä¸­çš„ translateZï¼Œå¦å¤–ï¼Œç‚ºäº†è®“å®ƒèƒ½æ­£ç¢ºä½œç”¨ï¼Œä¹Ÿéœ€è¦åœ¨ page é€™å€‹ CSS class ä¸­åŠ å…¥ transform-style: preserve-3dï¼Œå¦‚æ­¤ä¸€ä¾†ï¼Œæ‡‰è©²å¤šå°‘èƒ½æ¸›è¼•ç€è¦½å™¨çš„é‹ç®—è² æ“”ã€‚\né€é position: relative/absolute ä¾†å †ç–Šæ›¸é çš„ä¸Šä¸‹ä¸€é  ç”¨ z-index åˆ‡æ›å †ç–Šçš„é †åº react-spring æ§åˆ¶ rotateY åšç¿»é è½‰å ´ é…åˆ perspective å±¬æ€§æ”¹è®Šè¦–è§’å¢æ·»ç«‹é«”æ„Ÿ use-gesture åŠ å…¥æ‹–æ›³ç¿»é åŠŸèƒ½ è®“å¥—ä»¶å†æ¬¡å‰å¤§ é¦–å…ˆæˆ‘æƒ³åˆ°çš„æ˜¯æœ‰æ²’æœ‰ç¾æˆçš„(å…è²»)ç¿»é æ›¸æ•ˆæœå¥—ä»¶å¯ä»¥ç”¨ï¼Œ\nturn.jsâ€“ å»ºç«‹åœ¨ jQuery ä¹‹ä¸Šçš„å¥—ä»¶ï¼Œå¿«åå¹´æ²’æ›´æ–°äº†ï¼Œè€ƒé‡å¾ŒçºŒæ“´å……åŠŸèƒ½å¯èƒ½æœ‰å›°é›£ï¼Œæš«ä¸è€ƒæ…®ã€‚ StPageFlipâ€“ æ•ˆæœå¾ˆæ“¬çœŸï¼Œå¾ demo çœ‹èµ·ä¾†ä½¿ç”¨é«”é©—æµæš¢ï¼›è€Œä¸”æœ‰ React ç‰ˆæœ¬ï¼Œä½†æ˜¯ï¼Œå¾ commits çœ‹ä¾†æœ‰å…©å¹´æ²’æ›´æ–°äº†ï¼Œä»¥ front-end çš„è¿­ä»£é€Ÿåº¦åŠ ä¸Šï¼Œæ“”å¿ƒæ­ React 18 æœƒä¸æœƒå‡ºç¾ä¸æ˜çš„å‘å› æ­¤æ²’æœ‰ä½¿ç”¨ã€‚ å¾ŒçºŒåˆçœ‹äº†å¹¾å€‹å¥—ä»¶(æ¯”è¼ƒæ–°çš„)å¥½åƒä¹Ÿæ˜¯æ­åœ¨é€™äº›å¥—ä»¶ä¸Šå¯¦è¸å‡ºä¾†ï¼Œè¦ºå¾—é›£ä»¥åœ¨çŸ­æœŸç†è§£å…¶é‹ä½œæ–¹å¼ï¼Œæ€•æœªä¾†ä¸å¥½æ”¹ã€‚\nç´” CSS çš„ç¾æˆç¯„ä¾‹ Notebook page flip animation on scrimbaâ€“ ç¨‹å¼ç¢¼å¾ˆå–®ç´”ï¼Œæ•ˆæœç°¡å–®ï¼Œä½†èƒ½å¤ æ¥å—ï¼›å˜—è©¦äº†ä¸€é™£å­ï¼Œç™¼ç¾åœ¨å‘ˆç¾æ¬¡é çš„å…§å®¹ä¸Šï¼Œä¸€æ—¦æœ‰å¤šé ï¼Œé›–ç„¶åšå¾—åˆ°ï¼Œä½†ç¨‹å¼ç¢¼å¯è®€æ€§ä¸æ˜¯é‚£éº¼å¥½ï¼Œæ“”å¿ƒå¾ŒçºŒå¢åŠ æ‡‰ç”¨ï¼Œæ”¹å‹•èµ·ä¾†æœƒæœ‰å•é¡Œï¼Œè€Œä¸”è©¦åšçš„æ˜¯å‹•ç•«çš„ç‰ˆæœ¬ï¼Œå¯¦éš›ä¸Šæˆ‘éœ€è¦çš„æ˜¯æ‰‹å‹•è§¸ç™¼ã€‚ é€™é‚Šï¼Œæˆ‘èªç‚ºæ‡‰ç”¨ transform æœ‰æé ­ï¼Œåˆçœ‹åˆ° MDN è£¡çš„ç¯„ä¾‹æœ‰ matrix (æœ€è¿‘å‰›å¥½åœ¨çœ‹ç·šæ€§ä»£æ•¸çš„æ•™å­¸å½±ç‰‡)ï¼Œæ‹¿é€™å€‹ç¶²ç«™æ²™ç›¤æ¨æ¼”äº†ä¸€ä¸‹ï¼Œæˆ‘ä»¥ç‚ºèƒ½é€éæ“ä½œscaleX å’Œ skewY çš„çŸ©é™£è½‰æ›ä¾†åšå‡ºç¿»é æ•ˆæœæ®Šä¸çŸ¥â€¦\né€™å€‹ä½œæ³•ä¸‹ backface-visibility: hidden ä¸ç®¡ç”¨ï¼›ä¹Ÿæ²’æœ‰ rotate èƒ½ç”¨ï¼Œç¿»é æ•ˆæœæœ‰å¥‡æ€ªçš„æŠ–å‹•ã€‚\nDemo: https://codepen.io/allieschen/pen/NWOQxwx\nSee the Pen page-flip animation with matrix by YPChen (@allieschen)\ron CodePen.\rBook page flip animation on Codepenâ€“ å¯¦è¸å–®ç´”ï¼Œæ•ˆæœä¹Ÿä¸éŒ¯ï¼Œå˜—è©¦è®€æ”¹äº†ä¸€ä¸‹ç¨‹å¼ç¢¼ï¼Œç™¼ç¾æœ‰äº›å¯ä»¥ç°¡åŒ–çš„åœ°æ–¹ï¼Œä¸»è¦çš„å•é¡Œåœ¨ position: relative/absolute å †ç–Šä½¿ç”¨æœ‰é»è¤‡é›œï¼Œé‚„ç”¨ä¸Šäº† overflow: hidden é®è“‹ã€‚ å¾é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘ç¢ºä¿¡äº†å¯ä»¥ç”¨ rotateYã€perspectiveï¼ŒåŠ ä¸Š z-index åˆ‡æ›ç•¶ä½œä¸»è¦å¯¦è¸æ¦‚å¿µã€‚\né¡Œå¤–è©±ï¼šè£½ä½œæœŸé–“çªç„¶å¥½å¥‡å¦‚æœæ˜¯è¨­è¨ˆå¸«æœƒæ€éº¼åšï¼Œå¾—çŸ¥æœ‰å€‹å« Flip PDF Pro çš„è»Ÿé«”ï¼Œæ‹¿ä¾†ç•¶é—œéµå­—æŸ¥ç™¼ç¾è£½ä½œç¿»é æ›¸ç¶²é çš„æ‡‰ç”¨è »å¤šçš„ï¼Œåªæ˜¯æˆ‘éœ€è¦çš„æ˜¯é€ è¼ªå­çš„æ–¹æ³•ã€‚\nå¦å¤–ä¹Ÿè¢«å»ºè­°èªªå¯ä»¥å¾ PPT éå ´å‹•ç•«çš„æ–¹å‘å»æƒ³ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šé¢æŸ¥ CSS ç¯„ä¾‹çš„æƒ³æ³•ä¾†æºï¼›\nfigma ç¿»é å‹•ç•«â€“ é€™å€‹ä¾‹å­æ˜¯ä¸€æ ¼ä¸€æ ¼çš„æ’å‡ºä¾† ä¹Ÿæœ‰çœ‹åˆ°è »å¤š youtube å½±ç‰‡æ˜¯æ•™ç”¨ Adobe After Effect åš Animation library for React React å¼·å¤§çš„ç”Ÿæ…‹ç³»ï¼Œæœ‰å¥½å¤šå¾ˆæ£’çš„ animation library å¯ä»¥é¸ï¼Œé€™ä¹Ÿæ˜¯æˆ‘é¸æ“‡ç”¨ React è£½ä½œçš„åŸå› ï¼š\nFramer Motionâ€“ å®˜ç¶²çš„äº’å‹•ç¯„ä¾‹çœ‹èµ·ä¾†å¾ˆå¥½ä¸Šæ‰‹ react-springâ€“ ä½¿ç”¨åœ¨é€™å€‹ä¾‹å­ï¼Œå®Œç¾çš„å‘ˆç¾äº†æˆ‘æƒ³è¦çš„æ•ˆæœ é‚£å€‹ä¾‹å­çš„åŸå§‹ç¢¼å¯¦è¸ä¸­çœ‹ä¾†æœ‰è¤‡é›œçš„è½‰æ›â€¦æˆ‘ç†è§£ä¸èƒ½ï¼Œæ‰€ä»¥æ²’æœ‰ fork ç›´æ¥ä½¿ç”¨ã€‚ä»–ä¹Ÿç”¨äº† use-gestureï¼Œæ‰€ä»¥æˆ‘å¾ŒçºŒä¹Ÿé¸é€™å€‹åš drag-n-drop æ‡‰ç”¨ã€‚\nç´” JS ä¹Ÿæœ‰é—œæ–¼å‹•ç•«çš„å¥—ä»¶ï¼Œæ¯”å¦‚ï¼š\nGSAP Three.js Vercel é€™ä¸€ç¯‡æ–‡ç« åˆ†äº«ä»–å€‘æ€éº¼ç”¨ three.js åšå‡º Next conf çš„æ´»å‹•é é¢ã€‚\né€™å…©å€‹ lib çš„é€²å…¥é–€æª»éƒ½ä¸ä½ï¼Œåˆ react-spring æœ‰äººåšå‡ºéæˆ‘æƒ³è¦çš„æ•ˆæœï¼Œå› æ­¤æˆ‘ä¹Ÿé¸æ“‡äº†å®ƒã€‚\nä½¿ç”¨ react-spring å¯¦è¸ç¿»é å‹•ç•« é¦–å…ˆåƒè€ƒäº† react-spring å®˜ç¶²çš„é€™å€‹ä¾‹å­åšç‚ºè½‰å ´å¯¦è¸çš„åŸºåº•ï¼Œä¸¦æŠŠé é¢èˆ‡åœ–é¢çš„å‹•ç•«åˆ†é–‹ï¼›ä¹Ÿå°±æ˜¯ï¼Œç¿»é èˆ‡åœ–ç‰‡è®ŠåŒ–æ˜¯åˆ†é–‹çš„ useSpring ç®¡ç†ï¼š\nrotateYâ€“ ç¿»é æ•ˆæœéƒ½é å®ƒ ç„¶å¾Œæ˜¯ä¸åœ¨ useSpring ç®¡ç†çš„ CSS å±¬æ€§ï¼Œé€™è£¡è¦æ³¨æ„ï¼Œä»–å€‘è¦åœ¨ pageStyle å‰ï¼Œä¸ç„¶æœƒæ²’æœ‰æ•ˆæœï¼š\nz-indexâ€“ æ›¸æœ¬çš„ä¸Šä¸‹ä¸€é æ­£ç¢ºå †ç–Šçš„é—œéµæ˜¯å®ƒ transformOriginâ€“ æ”¹è®Šç¿»é çš„è»¸å¿ƒ transform: perspectiveâ€“ é€™å€‹æä¾›è¦–è§’çš„è®ŠåŒ–ï¼Œè®“ç¿»é æ•ˆæœå¾æ¶ˆå¤±é»å»¶ä¼¸ï¼Œè¦–è¦ºä¸Šæ›´æ“¬çœŸ // @/App.tsx import { useState } from \"react\"; import { useSpring, animated } from \"@react-spring/web\"; const [flipped, setFlipped] = useState(false); const pageStyle = useSpring({ rotateY: 0, config: { mass: 5, tension: 500, friction: 150 }, touchAction: \"none\" }); return ( \u003canimated.div style={{ zIndex: flipped ? 10 + zIndex : 100 - zIndex, transformOrigin: \"left\", transform: \"perspective(600px)\", ...pageStyle }} className=\"page\" \u003e ...the pictures \u003c/animated.div\u003e ) é—œæ–¼ config å±¬æ€§çš„ä½œç”¨ï¼Œå¼•ç”¨è‡ª Getting started with react-spring: physics, API, performance - Apptension Blog\nMass (when mass is higher, the element needs more velocity to be moved and more time to stop) Friction (higher friction reduces velocity and bounciness) Tension (higher tension reduces the impact of friction). ç¢ºä¿å–®é çš„æ•ˆæœå¯ä»¥ä¹‹å¾Œï¼Œæˆ‘å°±æŠŠå®ƒå°æˆä¸€å€‹å…ƒä»¶â€“ FlippablePageã€‚\næ¥è‘—æ˜¯æ”¾è¤‡æ•¸åŠŸèƒ½é å½¢æˆä¸€æœ¬æ›¸ï¼Œå…ˆé€é position å±¬æ€§è®“å„åŠŸèƒ½é è„«é›¢é è¨­çš„æ’ç‰ˆï¼Œå †ç–Šåœ¨ä¸€èµ·ï¼Œç„¶å¾Œèª¿æ•´ z-indexï¼›å‰é¢çš„é æ•¸ z-index ç‚º x å¾ 0 ç®—èµ·ï¼Œå…ƒä»¶ä¸­ä½¿ç”¨é‚è¼¯ç‚º\nå°šæœªç¿»é  = $100 - x$ ç¿»é å¾Œ = $10 + x$ è°æ˜çš„ä½ æ‡‰è©²æœƒç™¼ç¾ï¼Œç•¶ x = 45ï¼Œä¹Ÿå°±æ˜¯é æ•¸ä¾†åˆ° 46 é æ™‚ï¼Œé€™å€‹ç®—æ³•æœƒå‡ºç¾å•é¡Œï¼Œä½†å› ç‚ºæˆ‘çš„æ‡‰ç”¨ä¸æœƒåˆ°é€™å€‹é æ•¸ï¼Œä¹Ÿæ‡‰è©²èƒ½ç”¨ virtual list çš„æ–¹å¼é¿å…é€™å€‹å•é¡Œï¼Œæ‰€ä»¥æ²’é—œä¿‚\né€™é‚Šé‡åˆ°ä¸€å€‹å•é¡Œï¼Œå¦‚æœæŠŠ z-index å‚³å…¥ useSpringï¼Œåœ¨æ­£åé¢èª¿æ›æ™‚ï¼Œæœƒç”¢ç”Ÿå»¶é²ï¼Œæ‰€ä»¥æ”¹ç›´æ¥çµ¦é€² animated.div çš„ style å±¬æ€§ä¸­ã€‚\nåœ¨è£½ä½œå‰ä»¥åŠéç¨‹ä¸­ä½¿ç”¨ç›¡é‡å°‘çš„å…ƒç´ ä¾†é”æˆæƒ³è¦çš„å‹•ç•«æ•ˆæœï¼Œå› ç‚ºæ›¾è¢«ç¤¾ç¾¤ä¸­ç¾¤å‹çš„æé†’ï¼Œåœ¨ React çš„æ©Ÿåˆ¶ä¸­æ“ä½œå‹•ç•«ï¼Œå¯èƒ½æœƒç”¢ç”Ÿé æœŸå¤–çš„æ•ˆèƒ½å•é¡Œ\nåˆ°æ­¤ï¼Œå·²ç¶“æœ‰ç¿»é æ›¸çš„æ¨£å­äº†ã€‚\nä½¿ç”¨ ğŸ–ï¸use-gesture å¯¦è¸æ‹–æ‹‰ç¿»é  åƒè€ƒ use-gesture å®˜ç¶²çš„é€™å€‹ç¯„ä¾‹ï¼Œæä¾›äº†è·Ÿ useSpring ä¸€èµ·ä½¿ç”¨çš„ä½œæ³•ã€‚\næ¥è‘—å°±æ…¢æ…¢è©¦æ€éº¼æ¨£çš„å±¬æ€§å’Œé‚è¼¯å‘ˆç¾å‡ºä¾†çš„ç¿»é æ•ˆæœå¯ä»¥æ¥å—ï¼Œåˆä¸æœƒå¤ªè¤‡é›œğŸ˜µâ€ğŸ’«\næ³¨æ„ç‚ºäº†æ‹¿ useSpring çš„ api ç‰©ä»¶çµ¦é€² useDrag è£¡æ“ä½œï¼Œåƒæ•¸æœƒå¾ç‰©ä»¶æ”¹ç‚ºä¸€å€‹ç®­é ­å‡½å¼\nimport { useState } from \"react\"; import { useDrag } from \"@use-gesture/react\"; const [flipped, setFlipped] = useState(false); const [pageStyle, api] = useSpring(() =\u003e ({ rotateY: 0, config: { mass: 5, tension: 500, friction: 150 }, touchAction: \"none\" })); const bind = useDrag(({ movement: [movX], cancel, dragging }) =\u003e { // console.log(movX, pageStyle.rotateY.get()); const currentRY = pageStyle.rotateY.get(); if (currentRY \u003e -60) { api.start({ rotateY: 0 }); setFlipped(false); } if (currentRY \u003c= -60 \u0026\u0026 (movX \u003c 0 || !dragging)) { api.start({ rotateY: -180 }); setFlipped(true); } else if (dragging \u0026\u0026 currentRY \u003c= 0) { api.start({ rotateY: currentRY + movX }); } }); ä¸€å€‹å°æ’æ›²æ˜¯è¦æ³¨æ„åœ–ç‰‡è¼‰å…¥é€Ÿåº¦ï¼Œæœƒå½±éŸ¿ç¿»é å‹•ç•«çš„æµæš¢åº¦(æœƒå¡ä½)\næœ€å¾Œï¼Œæ‰“é–‹å°é¢å¾Œï¼Œæ›¸æœ¬å¯¬åº¦æ”¹è®Šï¼Œä¸€ä¾†æœƒè“‹åˆ°é‚Šç•Œè¶…å‡ºç•«é¢ï¼ŒäºŒä¾†æ²’æœ‰ç½®ä¸­ï¼Œæ‰€ä»¥åœ¨ FlippablePage åŠ å…¥ä¸€å€‹ onFlipped å±¬æ€§é€é useEffect ä¾†è§¸ç™¼ callbackâ€“ onFlippedï¼Œåš translateX çš„æ”¹è®Šã€‚\n",
  "wordCount" : "491",
  "inLanguage": "en",
  "image":"https://AlliesChen.github.io/images/a_child_waves_hand_in_spring.jpg","datePublished": "2023-09-19T23:29:44+08:00",
  "dateModified": "2023-09-19T23:29:44+08:00",
  "author":{
    "@type": "Person",
    "name": "Yu-Pang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://AlliesChen.github.io/posts/page-flip_animation_with_css/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "YP's Dev Memo",
    "logo": {
      "@type": "ImageObject",
      "url": "https://AlliesChen.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://AlliesChen.github.io/" accesskey="h" title="YP&#39;s Dev Memo (Alt + H)">YP&#39;s Dev Memo</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://AlliesChen.github.io/categories/" title="categories">
                    <span>categories</span>
                </a>
            </li>
            <li>
                <a href="https://AlliesChen.github.io/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
            <li>
                <a href="https://github.com/AlliesChen" title="github">
                    <span>github</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://AlliesChen.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://AlliesChen.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      é€é CSS è£½ä½œæ›¸æœ¬ç¿»é æ•ˆæœ
    </h1>
    <div class="post-description">
      é…åˆ react-spring, use-gesture æ“ä½œ CSS ä¾†åšç¿»é å‹•ç•«
    </div>
    <div class="post-meta"><span title='2023-09-19 23:29:44 +0800 CST'>September 19, 2023</span>&nbsp;Â·&nbsp;Yu-Pang&nbsp;|&nbsp;<a href="https://github.com/AlliesChen/website-hugo/blob/main/content/posts/page-flip_animation_with_CSS.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#tldr">TL;DR</a></li>
    <li><a href="#è®“å¥—ä»¶å†æ¬¡å‰å¤§">è®“å¥—ä»¶å†æ¬¡å‰å¤§</a></li>
    <li><a href="#ç´”-css-çš„ç¾æˆç¯„ä¾‹">ç´” CSS çš„ç¾æˆç¯„ä¾‹</a></li>
    <li><a href="#animation-library-for-react">Animation library for React</a></li>
    <li><a href="#ä½¿ç”¨-react-spring-å¯¦è¸ç¿»é å‹•ç•«">ä½¿ç”¨ react-spring å¯¦è¸ç¿»é å‹•ç•«</a></li>
    <li><a href="#ä½¿ç”¨-use-gesture-å¯¦è¸æ‹–æ‹‰ç¿»é ">ä½¿ç”¨ ğŸ–ï¸use-gesture å¯¦è¸æ‹–æ‹‰ç¿»é </a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><p>è¿‘æœŸæƒ³é€éã€Œç¿»é ã€é€™å€‹äº’å‹•æ–¹å¼ä¾†åšä¸€å€‹ web å°éŠæˆ²ï¼Œéç¨‹ä¸­ç™¼ç¾æ„å¤–åœ°ä¸å¥½å¯¦ç¾ã€‚</p>
<p>é€™ç¯‡æ–‡ç« éœ€è¦è®€è€…å° React é€™å€‹å‰ç«¯æ¡†æ¶åŠ CSS çš„ transition å±¬æ€§çš„æ‡‰ç”¨æœ‰åŸºæœ¬çš„äº†è§£ï¼ŒæˆæœåŠåŸå§‹ç¢¼æ˜¯å»ºç«‹æ–¼é€™å…©å€‹æŠ€è¡“ä¹‹ä¸Šçš„ï¼Œå…§æ–‡æœƒå¤§ç•¥åœ°å°å¯¦è¸çš„æ–¹å¼èªªæ˜ï¼Œä½†ä¸æœƒè©³ç´°åœ°æåŠæ‰€ä½¿ç”¨çš„æ¡†æ¶åŠå‡½å¼åº«ç¢ºåˆ‡ API çš„åŠŸèƒ½åŠç”¨æ³•ã€‚</p>
<h2 id="tldr">TL;DR<a hidden class="anchor" aria-hidden="true" href="#tldr">#</a></h2>
<p>æˆæœ: <a href="https://codesandbox.io/s/page-flippable-book-5h5ktm?file=/src/Page.tsx">https://codesandbox.io/s/page-flippable-book-5h5ktm?file=/src/Page.tsx</a></p>
<iframe src="https://codesandbox.io/embed/page-flippable-book-5h5ktm?fontsize=14&hidenavigation=1&theme=dark"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="page-flippable book"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>
<ul>
<li>é€é <code>translateZ</code> åšå‡ºæ›¸é çš„æ­£åé¢</li>
</ul>
<blockquote>
<p><u>2023/9/22</u>
åŸºæ–¼å‰ç«¯ç¤¾ç¾¤ç¶²å‹çš„å»ºè­°ï¼Œæˆ‘æŠŠåŸå…ˆç”¨ <code>opacity</code> è®Šæ›åšå‡ºçš„é é¢æ­£åé¢ï¼Œæ›æˆéœæ…‹ã€å–®ç´”åŠ åœ¨ CSS class&ndash; <code>back</code> ä¸­çš„ <code>translateZ</code>ï¼Œå¦å¤–ï¼Œç‚ºäº†è®“å®ƒèƒ½æ­£ç¢ºä½œç”¨ï¼Œä¹Ÿéœ€è¦åœ¨ <code>page</code> é€™å€‹ CSS class ä¸­åŠ å…¥ <code>transform-style: preserve-3d</code>ï¼Œå¦‚æ­¤ä¸€ä¾†ï¼Œæ‡‰è©²å¤šå°‘èƒ½æ¸›è¼•ç€è¦½å™¨çš„é‹ç®—è² æ“”ã€‚</p>
</blockquote>
<ul>
<li>é€é <code>position: relative/absolute</code> ä¾†å †ç–Šæ›¸é çš„ä¸Šä¸‹ä¸€é </li>
<li>ç”¨ <code>z-index</code> åˆ‡æ›å †ç–Šçš„é †åº</li>
<li><a href="https://www.react-spring.dev/">react-spring</a> æ§åˆ¶ <code>rotateY</code> åšç¿»é è½‰å ´</li>
<li>é…åˆ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/perspective"><code>perspective</code></a> å±¬æ€§æ”¹è®Šè¦–è§’å¢æ·»ç«‹é«”æ„Ÿ</li>
<li><a href="https://use-gesture.netlify.app/">use-gesture</a> åŠ å…¥æ‹–æ›³ç¿»é åŠŸèƒ½</li>
</ul>
<h2 id="è®“å¥—ä»¶å†æ¬¡å‰å¤§"><del>è®“å¥—ä»¶å†æ¬¡å‰å¤§</del><a hidden class="anchor" aria-hidden="true" href="#è®“å¥—ä»¶å†æ¬¡å‰å¤§">#</a></h2>
<p>é¦–å…ˆæˆ‘æƒ³åˆ°çš„æ˜¯æœ‰æ²’æœ‰ç¾æˆçš„(å…è²»)ç¿»é æ›¸æ•ˆæœå¥—ä»¶å¯ä»¥ç”¨ï¼Œ</p>
<ul>
<li><a href="http://www.turnjs.com/">turn.js</a>&ndash; å»ºç«‹åœ¨ jQuery ä¹‹ä¸Šçš„å¥—ä»¶ï¼Œå¿«åå¹´æ²’æ›´æ–°äº†ï¼Œè€ƒé‡å¾ŒçºŒæ“´å……åŠŸèƒ½å¯èƒ½æœ‰å›°é›£ï¼Œæš«ä¸è€ƒæ…®ã€‚</li>
<li><a href="https://github.com/Nodlik/StPageFlip">StPageFlip</a>&ndash; æ•ˆæœå¾ˆæ“¬çœŸï¼Œå¾ demo çœ‹èµ·ä¾†ä½¿ç”¨é«”é©—æµæš¢ï¼›è€Œä¸”æœ‰ <a href="https://github.com/Nodlik/react-pageflip">React ç‰ˆæœ¬</a>ï¼Œä½†æ˜¯ï¼Œå¾ commits çœ‹ä¾†æœ‰å…©å¹´æ²’æ›´æ–°äº†ï¼Œä»¥ front-end çš„è¿­ä»£é€Ÿåº¦åŠ ä¸Šï¼Œæ“”å¿ƒæ­ React 18 æœƒä¸æœƒå‡ºç¾ä¸æ˜çš„å‘å› æ­¤æ²’æœ‰ä½¿ç”¨ã€‚</li>
</ul>
<p>å¾ŒçºŒåˆçœ‹äº†å¹¾å€‹å¥—ä»¶(æ¯”è¼ƒæ–°çš„)å¥½åƒä¹Ÿæ˜¯æ­åœ¨é€™äº›å¥—ä»¶ä¸Šå¯¦è¸å‡ºä¾†ï¼Œè¦ºå¾—é›£ä»¥åœ¨çŸ­æœŸç†è§£å…¶é‹ä½œæ–¹å¼ï¼Œæ€•æœªä¾†ä¸å¥½æ”¹ã€‚</p>
<h2 id="ç´”-css-çš„ç¾æˆç¯„ä¾‹">ç´” CSS çš„ç¾æˆç¯„ä¾‹<a hidden class="anchor" aria-hidden="true" href="#ç´”-css-çš„ç¾æˆç¯„ä¾‹">#</a></h2>
<ul>
<li><a href="https://scrimba.com/scrim/c6GV2Ay">Notebook page flip animation</a> on scrimba&ndash; ç¨‹å¼ç¢¼å¾ˆå–®ç´”ï¼Œæ•ˆæœç°¡å–®ï¼Œä½†èƒ½å¤ æ¥å—ï¼›å˜—è©¦äº†ä¸€é™£å­ï¼Œç™¼ç¾åœ¨å‘ˆç¾æ¬¡é çš„å…§å®¹ä¸Šï¼Œä¸€æ—¦æœ‰å¤šé ï¼Œé›–ç„¶åšå¾—åˆ°ï¼Œä½†ç¨‹å¼ç¢¼å¯è®€æ€§ä¸æ˜¯é‚£éº¼å¥½ï¼Œæ“”å¿ƒå¾ŒçºŒå¢åŠ æ‡‰ç”¨ï¼Œæ”¹å‹•èµ·ä¾†æœƒæœ‰å•é¡Œï¼Œè€Œä¸”è©¦åšçš„æ˜¯å‹•ç•«çš„ç‰ˆæœ¬ï¼Œå¯¦éš›ä¸Šæˆ‘éœ€è¦çš„æ˜¯æ‰‹å‹•è§¸ç™¼ã€‚</li>
</ul>
<p>é€™é‚Šï¼Œæˆ‘èªç‚ºæ‡‰ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform"><code>transform</code></a> æœ‰æé ­ï¼Œåˆçœ‹åˆ° MDN è£¡çš„ç¯„ä¾‹æœ‰ <code>matrix</code> (æœ€è¿‘å‰›å¥½åœ¨çœ‹<a href="https://www.3blue1brown.com/topics/linear-algebra">ç·šæ€§ä»£æ•¸</a>çš„æ•™å­¸å½±ç‰‡)ï¼Œæ‹¿<a href="http://www.eion.com.tw/Blogger/?Pid=1168">é€™å€‹ç¶²ç«™</a>æ²™ç›¤æ¨æ¼”äº†ä¸€ä¸‹ï¼Œæˆ‘ä»¥ç‚ºèƒ½é€éæ“ä½œ<code>scaleX</code> å’Œ <code>skewY</code> çš„çŸ©é™£è½‰æ›ä¾†åšå‡ºç¿»é æ•ˆæœæ®Šä¸çŸ¥&hellip;</p>
<p>é€™å€‹ä½œæ³•ä¸‹ <code>backface-visibility: hidden</code> ä¸ç®¡ç”¨ï¼›ä¹Ÿæ²’æœ‰ rotate èƒ½ç”¨ï¼Œç¿»é æ•ˆæœæœ‰å¥‡æ€ªçš„æŠ–å‹•ã€‚</p>
<p>Demo: <a href="https://codepen.io/allieschen/pen/NWOQxwx">https://codepen.io/allieschen/pen/NWOQxwx</a></p>
<iframe height="300" style="width: 100%;" scrolling="no" title="page-flip animation with matrix" src="https://codepen.io/allieschen/embed/NWOQxwx?default-tab=html%2Cresult" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href="https://codepen.io/allieschen/pen/NWOQxwx">
  page-flip animation with matrix</a> by YPChen (<a href="https://codepen.io/allieschen">@allieschen</a>)
  on <a href="https://codepen.io">CodePen</a>.
</iframe>
<ul>
<li><a href="https://codepen.io/pizzabote/pen/xxxXmXN">Book page flip animation</a> on Codepen&ndash; å¯¦è¸å–®ç´”ï¼Œæ•ˆæœä¹Ÿä¸éŒ¯ï¼Œå˜—è©¦è®€æ”¹äº†ä¸€ä¸‹ç¨‹å¼ç¢¼ï¼Œç™¼ç¾æœ‰äº›å¯ä»¥ç°¡åŒ–çš„åœ°æ–¹ï¼Œä¸»è¦çš„å•é¡Œåœ¨ <code>position: relative/absolute</code> å †ç–Šä½¿ç”¨æœ‰é»è¤‡é›œï¼Œé‚„ç”¨ä¸Šäº† <code>overflow: hidden</code> é®è“‹ã€‚</li>
</ul>
<p>å¾é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘ç¢ºä¿¡äº†å¯ä»¥ç”¨ <code>rotateY</code>ã€<code>perspective</code>ï¼ŒåŠ ä¸Š <code>z-index</code> åˆ‡æ›ç•¶ä½œä¸»è¦å¯¦è¸æ¦‚å¿µã€‚</p>
<hr>
<p>é¡Œå¤–è©±ï¼šè£½ä½œæœŸé–“çªç„¶å¥½å¥‡å¦‚æœæ˜¯è¨­è¨ˆå¸«æœƒæ€éº¼åšï¼Œå¾—çŸ¥æœ‰å€‹å« Flip PDF Pro çš„è»Ÿé«”ï¼Œæ‹¿ä¾†ç•¶é—œéµå­—æŸ¥ç™¼ç¾è£½ä½œç¿»é æ›¸ç¶²é çš„æ‡‰ç”¨è »å¤šçš„ï¼Œåªæ˜¯æˆ‘éœ€è¦çš„æ˜¯é€ è¼ªå­çš„æ–¹æ³•ã€‚</p>
<p>å¦å¤–ä¹Ÿè¢«å»ºè­°èªªå¯ä»¥å¾ PPT éå ´å‹•ç•«çš„æ–¹å‘å»æƒ³ï¼Œä¹Ÿæ˜¯æˆ‘ä¸Šé¢æŸ¥ CSS ç¯„ä¾‹çš„æƒ³æ³•ä¾†æºï¼›</p>
<ul>
<li><a href="https://www.figma.com/community/file/1000299056910046829/Magical-Page-Flipping-Animation">figma ç¿»é å‹•ç•«</a>&ndash; é€™å€‹ä¾‹å­æ˜¯ä¸€æ ¼ä¸€æ ¼çš„æ’å‡ºä¾†</li>
<li>ä¹Ÿæœ‰çœ‹åˆ°è »å¤š youtube å½±ç‰‡æ˜¯æ•™ç”¨ Adobe After Effect åš</li>
</ul>
<h2 id="animation-library-for-react">Animation library for React<a hidden class="anchor" aria-hidden="true" href="#animation-library-for-react">#</a></h2>
<p>React å¼·å¤§çš„ç”Ÿæ…‹ç³»ï¼Œæœ‰å¥½å¤šå¾ˆæ£’çš„ animation library å¯ä»¥é¸ï¼Œé€™ä¹Ÿæ˜¯æˆ‘é¸æ“‡ç”¨ React è£½ä½œçš„åŸå› ï¼š</p>
<ul>
<li><a href="https://www.framer.com/motion/">Framer Motion</a>&ndash; å®˜ç¶²çš„äº’å‹•ç¯„ä¾‹çœ‹èµ·ä¾†å¾ˆå¥½ä¸Šæ‰‹</li>
<li><a href="https://www.react-spring.dev/">react-spring</a>&ndash; ä½¿ç”¨åœ¨<a href="https://www.reddit.com/r/reactjs/comments/dl8eqp/i_made_a_book_with_flipping_as_in_life/">é€™å€‹ä¾‹å­</a>ï¼Œå®Œç¾çš„å‘ˆç¾äº†æˆ‘æƒ³è¦çš„æ•ˆæœ</li>
</ul>
<blockquote>
<p><a href="https://github.com/pylnata/livebook">é‚£å€‹ä¾‹å­</a>çš„åŸå§‹ç¢¼å¯¦è¸ä¸­çœ‹ä¾†æœ‰è¤‡é›œçš„è½‰æ›&hellip;æˆ‘ç†è§£ä¸èƒ½ï¼Œæ‰€ä»¥æ²’æœ‰ fork ç›´æ¥ä½¿ç”¨ã€‚ä»–ä¹Ÿç”¨äº† use-gestureï¼Œæ‰€ä»¥æˆ‘å¾ŒçºŒä¹Ÿé¸é€™å€‹åš drag-n-drop æ‡‰ç”¨ã€‚</p>
</blockquote>
<p>ç´” JS ä¹Ÿæœ‰é—œæ–¼å‹•ç•«çš„å¥—ä»¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><a href="https://greensock.com/gsap/">GSAP</a></li>
<li><a href="https://threejs.org/">Three.js</a></li>
</ul>
<blockquote>
<p>Vercel <a href="https://vercel.com/blog/building-an-interactive-webgl-experience-in-next-js">é€™ä¸€ç¯‡</a>æ–‡ç« åˆ†äº«ä»–å€‘æ€éº¼ç”¨ three.js åšå‡º Next conf çš„æ´»å‹•é é¢ã€‚</p>
</blockquote>
<p>é€™å…©å€‹ lib çš„é€²å…¥é–€æª»éƒ½ä¸ä½ï¼Œåˆ react-spring æœ‰äººåšå‡ºéæˆ‘æƒ³è¦çš„æ•ˆæœï¼Œå› æ­¤æˆ‘ä¹Ÿé¸æ“‡äº†å®ƒã€‚</p>
<h2 id="ä½¿ç”¨-react-spring-å¯¦è¸ç¿»é å‹•ç•«">ä½¿ç”¨ react-spring å¯¦è¸ç¿»é å‹•ç•«<a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-react-spring-å¯¦è¸ç¿»é å‹•ç•«">#</a></h2>
<p>é¦–å…ˆåƒè€ƒäº† react-spring å®˜ç¶²çš„<a href="https://codesandbox.io/s/cju2d?file=/src/App.tsx">é€™å€‹ä¾‹å­</a>åšç‚ºè½‰å ´å¯¦è¸çš„åŸºåº•ï¼Œä¸¦æŠŠé é¢èˆ‡åœ–é¢çš„å‹•ç•«åˆ†é–‹ï¼›ä¹Ÿå°±æ˜¯ï¼Œç¿»é èˆ‡åœ–ç‰‡è®ŠåŒ–æ˜¯åˆ†é–‹çš„ <code>useSpring</code> ç®¡ç†ï¼š</p>
<ul>
<li><code>rotateY</code>&ndash; ç¿»é æ•ˆæœéƒ½é å®ƒ</li>
</ul>
<p>ç„¶å¾Œæ˜¯ä¸åœ¨ <code>useSpring</code> ç®¡ç†çš„ CSS å±¬æ€§ï¼Œé€™è£¡è¦æ³¨æ„ï¼Œä»–å€‘è¦åœ¨ <code>pageStyle</code> å‰ï¼Œä¸ç„¶æœƒæ²’æœ‰æ•ˆæœï¼š</p>
<ul>
<li><code>z-index</code>&ndash; æ›¸æœ¬çš„ä¸Šä¸‹ä¸€é æ­£ç¢ºå †ç–Šçš„é—œéµæ˜¯å®ƒ</li>
<li><code>transformOrigin</code>&ndash; æ”¹è®Šç¿»é çš„è»¸å¿ƒ</li>
<li><code>transform: perspective</code>&ndash; é€™å€‹æä¾›è¦–è§’çš„è®ŠåŒ–ï¼Œè®“ç¿»é æ•ˆæœå¾æ¶ˆå¤±é»å»¶ä¼¸ï¼Œè¦–è¦ºä¸Šæ›´æ“¬çœŸ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#75715e">// @/App.tsx
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useState</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useSpring</span>, <span style="color:#a6e22e">animated</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@react-spring/web&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">flipped</span>, <span style="color:#a6e22e">setFlipped</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">pageStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">useSpring</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rotateY</span>: <span style="color:#66d9ef">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">mass</span>: <span style="color:#66d9ef">5</span>, <span style="color:#a6e22e">tension</span>: <span style="color:#66d9ef">500</span>, <span style="color:#a6e22e">friction</span>: <span style="color:#66d9ef">150</span> },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">touchAction</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;none&#34;</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">animated.div</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span>{{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">zIndex</span>: <span style="color:#66d9ef">flipped</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">zIndex</span> : <span style="color:#66d9ef">100</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">zIndex</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">transformOrigin</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;left&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">transform</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;perspective(600px)&#34;</span>,
</span></span><span style="display:flex;"><span>        ...<span style="color:#a6e22e">pageStyle</span>
</span></span><span style="display:flex;"><span>      }}
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;page&#34;</span>
</span></span><span style="display:flex;"><span>    &gt;
</span></span><span style="display:flex;"><span>      ...<span style="color:#a6e22e">the</span> <span style="color:#a6e22e">pictures</span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">animated.div</span>&gt;
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><blockquote>
<p>é—œæ–¼ config å±¬æ€§çš„ä½œç”¨ï¼Œå¼•ç”¨è‡ª <a href="https://www.apptension.com/blog-posts/getting-started-with-react-spring-spring-physics-api-performance">Getting started with react-spring: physics, API, performance - Apptension Blog</a></p>
<ul>
<li>Mass (when mass is higher, the element needs more velocity to be moved and more time to stop)</li>
<li>Friction (higher friction reduces velocity and bounciness)</li>
<li>Tension (higher tension reduces the impact of friction).</li>
</ul>
</blockquote>
<p>ç¢ºä¿å–®é çš„æ•ˆæœå¯ä»¥ä¹‹å¾Œï¼Œæˆ‘å°±æŠŠå®ƒå°æˆä¸€å€‹å…ƒä»¶&ndash; <code>FlippablePage</code>ã€‚</p>
<p>æ¥è‘—æ˜¯æ”¾è¤‡æ•¸åŠŸèƒ½é å½¢æˆä¸€æœ¬æ›¸ï¼Œå…ˆé€é <code>position</code> å±¬æ€§è®“å„åŠŸèƒ½é è„«é›¢é è¨­çš„æ’ç‰ˆï¼Œå †ç–Šåœ¨ä¸€èµ·ï¼Œç„¶å¾Œèª¿æ•´ <code>z-index</code>ï¼›å‰é¢çš„é æ•¸ <code>z-index</code> ç‚º x å¾ 0 ç®—èµ·ï¼Œå…ƒä»¶ä¸­ä½¿ç”¨é‚è¼¯ç‚º</p>
<ul>
<li>å°šæœªç¿»é  = $100 - x$</li>
<li>ç¿»é å¾Œ = $10 + x$</li>
</ul>
<blockquote>
<p>è°æ˜çš„ä½ æ‡‰è©²æœƒç™¼ç¾ï¼Œç•¶ x = 45ï¼Œä¹Ÿå°±æ˜¯é æ•¸ä¾†åˆ° 46 é æ™‚ï¼Œé€™å€‹ç®—æ³•æœƒå‡ºç¾å•é¡Œï¼Œä½†å› ç‚ºæˆ‘çš„æ‡‰ç”¨ä¸æœƒåˆ°é€™å€‹é æ•¸ï¼Œä¹Ÿæ‡‰è©²èƒ½ç”¨ <a href="https://www.patterns.dev/posts/virtual-lists">virtual list</a> çš„æ–¹å¼é¿å…é€™å€‹å•é¡Œï¼Œæ‰€ä»¥æ²’é—œä¿‚</p>
</blockquote>
<p>é€™é‚Šé‡åˆ°ä¸€å€‹å•é¡Œï¼Œå¦‚æœæŠŠ <code>z-index</code> å‚³å…¥ <code>useSpring</code>ï¼Œåœ¨æ­£åé¢èª¿æ›æ™‚ï¼Œæœƒç”¢ç”Ÿå»¶é²ï¼Œæ‰€ä»¥æ”¹ç›´æ¥çµ¦é€² <code>animated.div</code> çš„ <code>style</code> å±¬æ€§ä¸­ã€‚</p>
<blockquote>
<p>åœ¨è£½ä½œå‰ä»¥åŠéç¨‹ä¸­ä½¿ç”¨ç›¡é‡å°‘çš„å…ƒç´ ä¾†é”æˆæƒ³è¦çš„å‹•ç•«æ•ˆæœï¼Œå› ç‚ºæ›¾è¢«ç¤¾ç¾¤ä¸­ç¾¤å‹çš„æé†’ï¼Œåœ¨ React çš„æ©Ÿåˆ¶ä¸­æ“ä½œå‹•ç•«ï¼Œå¯èƒ½æœƒç”¢ç”Ÿé æœŸå¤–çš„æ•ˆèƒ½å•é¡Œ</p>
</blockquote>
<p>åˆ°æ­¤ï¼Œå·²ç¶“æœ‰ç¿»é æ›¸çš„æ¨£å­äº†ã€‚</p>
<h2 id="ä½¿ç”¨-use-gesture-å¯¦è¸æ‹–æ‹‰ç¿»é ">ä½¿ç”¨ ğŸ–ï¸use-gesture å¯¦è¸æ‹–æ‹‰ç¿»é <a hidden class="anchor" aria-hidden="true" href="#ä½¿ç”¨-use-gesture-å¯¦è¸æ‹–æ‹‰ç¿»é ">#</a></h2>
<p>åƒè€ƒ use-gesture å®˜ç¶²çš„<a href="https://use-gesture.netlify.app/docs/state/#movement-and-offset">é€™å€‹ç¯„ä¾‹</a>ï¼Œæä¾›äº†è·Ÿ <code>useSpring</code> ä¸€èµ·ä½¿ç”¨çš„ä½œæ³•ã€‚</p>
<p>æ¥è‘—å°±æ…¢æ…¢è©¦æ€éº¼æ¨£çš„å±¬æ€§å’Œé‚è¼¯å‘ˆç¾å‡ºä¾†çš„ç¿»é æ•ˆæœå¯ä»¥æ¥å—ï¼Œåˆä¸æœƒå¤ªè¤‡é›œğŸ˜µâ€ğŸ’«</p>
<blockquote>
<p>æ³¨æ„ç‚ºäº†æ‹¿ <code>useSpring</code> çš„ api ç‰©ä»¶çµ¦é€² <code>useDrag</code> è£¡æ“ä½œï¼Œåƒæ•¸æœƒå¾ç‰©ä»¶æ”¹ç‚ºä¸€å€‹ç®­é ­å‡½å¼</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useState</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useDrag</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@use-gesture/react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">flipped</span>, <span style="color:#a6e22e">setFlipped</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">pageStyle</span>, <span style="color:#a6e22e">api</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useSpring</span>(() <span style="color:#f92672">=&gt;</span> ({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rotateY</span>: <span style="color:#66d9ef">0</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">config</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">mass</span>: <span style="color:#66d9ef">5</span>, <span style="color:#a6e22e">tension</span>: <span style="color:#66d9ef">500</span>, <span style="color:#a6e22e">friction</span>: <span style="color:#66d9ef">150</span> },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">touchAction</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;none&#34;</span>
</span></span><span style="display:flex;"><span>}));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">bind</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">useDrag</span>(({ <span style="color:#a6e22e">movement</span><span style="color:#f92672">:</span> [<span style="color:#a6e22e">movX</span>], <span style="color:#a6e22e">cancel</span>, <span style="color:#a6e22e">dragging</span> }) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// console.log(movX, pageStyle.rotateY.get());
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">currentRY</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pageStyle</span>.<span style="color:#a6e22e">rotateY</span>.<span style="color:#66d9ef">get</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">currentRY</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">60</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">start</span>({ <span style="color:#a6e22e">rotateY</span>: <span style="color:#66d9ef">0</span> });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setFlipped</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">currentRY</span> <span style="color:#f92672">&lt;=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">60</span> <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">movX</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">dragging</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">start</span>({ <span style="color:#a6e22e">rotateY</span><span style="color:#f92672">:</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">180</span> });
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setFlipped</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">dragging</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">currentRY</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">api</span>.<span style="color:#a6e22e">start</span>({ <span style="color:#a6e22e">rotateY</span>: <span style="color:#66d9ef">currentRY</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">movX</span> });
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><blockquote>
<p>ä¸€å€‹å°æ’æ›²æ˜¯è¦æ³¨æ„åœ–ç‰‡è¼‰å…¥é€Ÿåº¦ï¼Œæœƒå½±éŸ¿ç¿»é å‹•ç•«çš„æµæš¢åº¦(æœƒå¡ä½)</p>
</blockquote>
<p>æœ€å¾Œï¼Œæ‰“é–‹å°é¢å¾Œï¼Œæ›¸æœ¬å¯¬åº¦æ”¹è®Šï¼Œä¸€ä¾†æœƒè“‹åˆ°é‚Šç•Œè¶…å‡ºç•«é¢ï¼ŒäºŒä¾†æ²’æœ‰ç½®ä¸­ï¼Œæ‰€ä»¥åœ¨ <code>FlippablePage</code> åŠ å…¥ä¸€å€‹ <code>onFlipped</code> å±¬æ€§é€é <code>useEffect</code> ä¾†è§¸ç™¼ callback&ndash; <code>onFlipped</code>ï¼Œåš <code>translateX</code> çš„æ”¹è®Šã€‚</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://AlliesChen.github.io/tags/css/">CSS</a></li>
      <li><a href="https://AlliesChen.github.io/tags/animation/">Animation</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://AlliesChen.github.io/posts/start_cs61b/">
    <span class="title">Â« Prev</span>
    <br>
    <span>é–‹å§‹ CS61B å­¸ç¿’è³‡æ–™çµæ§‹åŠæ¼”ç®—æ³•</span>
  </a>
  <a class="next" href="https://AlliesChen.github.io/posts/have_fun_with_typescript_part2/">
    <span class="title">Next Â»</span>
    <br>
    <span>æœ‰è¶£çš„ TypeScript å‹åˆ¥ç”¨æ³•èˆ‡æ©Ÿåˆ¶ Part 2</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://AlliesChen.github.io/">YP&#39;s Dev Memo</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
